<template>
  <ve-line :data="chartData" :settings="chartSettings"></ve-line>
</template>

<script>
import {getChartData} from '../../api/testChart'

export default {
  data: function () {
    return {
      // chartData: {
      //   columns: ['日期', '访问用户', '下单用户', '下单率'],
      //   rows: [
      //     {'日期': '1/1', '访问用户': 1393, '下单用户': 1093, '下单率': 0.32},
      //     {'日期': '1/2', '访问用户': 3530, '下单用户': 3230, '下单率': 0.26},
      //     {'日期': '1/3', '访问用户': 2923, '下单用户': 2623, '下单率': 0.76},
      //     {'日期': '1/4', '访问用户': 1723, '下单用户': 1423, '下单率': 0.49},
      //     {'日期': '1/5', '访问用户': 3792, '下单用户': 3492, '下单率': 0.323},
      //     {'日期': '1/6', '访问用户': 4593, '下单用户': 4293, '下单率': 0.78}
      //   ]
      // }
      chartData: null,
      chartSettings: {
        scale: [
          true, true
        ]
      }
    }
  },
  created () {
    this._getChartData()
  },
  mounted () {
    // this._getChartData()
    // this.$nextTick(() => {
    //   let str = '[{"time":"17:52:14","设定值":40,"实际值":39.8},{"time":"17:46:44","设定值":40,"实际值":39.7},{"time":"17:40:44","设定值":40,"实际值":39.6},{"time":"17:35:14","设定值":40,"实际值":39.4},{"time":"17:29:14","设定值":40,"实际值":39.3},{"time":"17:23:44","设定值":40,"实际值":40},{"time":"17:17:44","设定值":40,"实际值":39.9},{"time":"17:12:14","设定值":40,"实际值":39.8},{"time":"17:06:14","设定值":40,"实际值":39.8},{"time":"17:00:44","设定值":40,"实际值":39.7},{"time":"16:54:44","设定值":40,"实际值":39.7},{"time":"16:49:14","设定值":40,"实际值":39.7},{"time":"16:43:14","设定值":40,"实际值":39.6},{"time":"16:37:44","设定值":40,"实际值":39.6},{"time":"16:31:44","设定值":40,"实际值":39.5},{"time":"16:26:14","设定值":40,"实际值":39.4},{"time":"16:20:14","设定值":40,"实际值":39.3},{"time":"16:14:44","设定值":40,"实际值":39.4},{"time":"16:08:44","设定值":40,"实际值":40},{"time":"16:03:14","设定值":40,"实际值":39.9},{"time":"15:57:14","设定值":40,"实际值":39.9},{"time":"15:51:44","设定值":40,"实际值":39.8},{"time":"15:45:21","设定值":40,"实际值":39.7},{"time":"15:39:51","设定值":40,"实际值":39.6},{"time":"15:33:51","设定值":40,"实际值":39.4},{"time":"15:27:40","设定值":40,"实际值":40},{"time":"15:21:40","设定值":40,"实际值":39.9},{"time":"15:16:10","设定值":40,"实际值":39.7},{"time":"15:10:10","设定值":40,"实际值":39.6},{"time":"15:04:40","设定值":40,"实际值":39.5},{"time":"14:58:40","设定值":40,"实际值":40},{"time":"14:53:10","设定值":40,"实际值":39.9},{"time":"14:47:10","设定值":40,"实际值":39.8},{"time":"14:41:40","设定值":40,"实际值":39.6},{"time":"14:35:40","设定值":40,"实际值":39.5},{"time":"14:30:10","设定值":40,"实际值":39.3},{"time":"14:24:10","设定值":40,"实际值":40},{"time":"14:18:40","设定值":40,"实际值":39.9},{"time":"14:12:40","设定值":40,"实际值":39.7},{"time":"14:07:10","设定值":40,"实际值":39.6},{"time":"14:01:10","设定值":40,"实际值":39.5},{"time":"13:55:40","设定值":40,"实际值":39.9},{"time":"13:49:40","设定值":40,"实际值":39.9},{"time":"13:44:10","设定值":40,"实际值":39.8},{"time":"13:38:10","设定值":40,"实际值":39.6},{"time":"13:32:40","设定值":40,"实际值":39.5},{"time":"13:26:40","设定值":40,"实际值":39.4},{"time":"13:21:10","设定值":40,"实际值":39.3},{"time":"13:15:10","设定值":40,"实际值":39.1},{"time":"13:09:40","设定值":40,"实际值":40},{"time":"11:07:17","设定值":40,"实际值":39.9},{"time":"11:01:47","设定值":40,"实际值":39.8},{"time":"10:55:47","设定值":40,"实际值":39.7},{"time":"10:50:17","设定值":40,"实际值":39.6},{"time":"10:44:17","设定值":40,"实际值":39.5},{"time":"10:38:47","设定值":40,"实际值":39.4},{"time":"10:32:47","设定值":40,"实际值":39.2},{"time":"10:27:17","设定值":40,"实际值":40},{"time":"10:21:17","设定值":40,"实际值":40},{"time":"10:15:47","设定值":40,"实际值":39.9},{"time":"10:09:47","设定值":40,"实际值":39.9},{"time":"10:04:17","设定值":40,"实际值":39.8},{"time":"09:58:17","设定值":40,"实际值":39.8},{"time":"09:52:47","设定值":40,"实际值":39.8},{"time":"09:46:47","设定值":40,"实际值":39.7},{"time":"09:41:17","设定值":40,"实际值":39.7},{"time":"09:35:17","设定值":40,"实际值":39.7},{"time":"09:29:47","设定值":40,"实际值":39.6},{"time":"09:23:47","设定值":40,"实际值":39.6},{"time":"09:18:17","设定值":40,"实际值":39.6},{"time":"09:12:17","设定值":40,"实际值":39.5},{"time":"09:06:47","设定值":40,"实际值":39.5},{"time":"09:00:47","设定值":40,"实际值":39.5},{"time":"08:55:17","设定值":40,"实际值":40.7},{"time":"07:16:54","设定值":40,"实际值":39.4},{"time":"07:11:24","设定值":40,"实际值":39.4},{"time":"07:05:24","设定值":40,"实际值":39.3},{"time":"06:59:54","设定值":40,"实际值":39.2},{"time":"06:53:54","设定值":40,"实际值":39.1},{"time":"06:48:24","设定值":40,"实际值":39},{"time":"06:42:24","设定值":40,"实际值":39.6},{"time":"06:36:54","设定值":40,"实际值":40.3},{"time":"06:30:54","设定值":40,"实际值":39},{"time":"06:25:24","设定值":40,"实际值":40},{"time":"06:19:24","设定值":40,"实际值":39.9},{"time":"06:13:54","设定值":40,"实际值":39.8},{"time":"06:07:54","设定值":40,"实际值":39.8},{"time":"06:02:24","设定值":40,"实际值":39.7},{"time":"05:56:24","设定值":40,"实际值":39.6},{"time":"05:50:54","设定值":40,"实际值":39.4},{"time":"05:44:54","设定值":40,"实际值":39.3},{"time":"05:39:24","设定值":40,"实际值":39.2},{"time":"05:33:24","设定值":40,"实际值":39.2},{"time":"05:27:54","设定值":40,"实际值":39.1},{"time":"05:21:54","设定值":40,"实际值":39},{"time":"05:16:24","设定值":40,"实际值":39.8},{"time":"05:10:24","设定值":40,"实际值":39.2},{"time":"05:04:54","设定值":40,"实际值":39.3},{"time":"04:58:54","设定值":40,"实际值":39.4},{"time":"04:53:24","设定值":40,"实际值":39.5},{"time":"04:47:24","设定值":40,"实际值":39.5},{"time":"04:41:54","设定值":40,"实际值":39.5},{"time":"04:35:54","设定值":40,"实际值":39.5},{"time":"04:30:24","设定值":40,"实际值":39.5},{"time":"04:24:24","设定值":40,"实际值":39.4},{"time":"04:18:54","设定值":40,"实际值":39.3},{"time":"04:12:54","设定值":40,"实际值":40},{"time":"04:07:24","设定值":40,"实际值":39.9},{"time":"04:01:24","设定值":40,"实际值":39.8},{"time":"03:55:54","设定值":40,"实际值":39.7},{"time":"03:49:54","设定值":40,"实际值":39.6},{"time":"03:44:24","设定值":40,"实际值":39.6},{"time":"03:38:24","设定值":40,"实际值":39.5},{"time":"03:32:54","设定值":40,"实际值":39.4},{"time":"03:26:54","设定值":40,"实际值":39.3},{"time":"03:21:24","设定值":40,"实际值":39.5},{"time":"03:15:24","设定值":40,"实际值":39.9},{"time":"03:09:54","设定值":40,"实际值":39.8},{"time":"03:03:54","设定值":40,"实际值":39.7},{"time":"02:58:24","设定值":40,"实际值":39.6},{"time":"02:52:24","设定值":40,"实际值":39.5},{"time":"02:46:54","设定值":40,"实际值":39.4},{"time":"02:40:54","设定值":40,"实际值":39.3},{"time":"02:35:24","设定值":40,"实际值":39.2},{"time":"02:29:24","设定值":40,"实际值":39.2},{"time":"02:23:54","设定值":40,"实际值":39.5},{"time":"02:17:54","设定值":40,"实际值":39.6},{"time":"02:12:24","设定值":40,"实际值":39.6},{"time":"02:06:24","设定值":40,"实际值":39.7},{"time":"02:00:54","设定值":40,"实际值":39.7},{"time":"01:54:54","设定值":40,"实际值":39.7},{"time":"01:49:24","设定值":40,"实际值":39.7},{"time":"01:43:24","设定值":40,"实际值":39.6},{"time":"01:37:54","设定值":40,"实际值":39.5},{"time":"01:31:54","设定值":40,"实际值":39.5},{"time":"01:26:24","设定值":40,"实际值":39.4},{"time":"01:20:24","设定值":40,"实际值":39.3},{"time":"01:14:54","设定值":40,"实际值":39.3},{"time":"01:08:54","设定值":40,"实际值":40},{"time":"01:03:24","设定值":40,"实际值":39.9},{"time":"00:57:24","设定值":40,"实际值":39.8},{"time":"00:51:54","设定值":40,"实际值":39.7},{"time":"00:45:54","设定值":40,"实际值":39.6},{"time":"00:40:24","设定值":40,"实际值":39.5},{"time":"00:34:24","设定值":40,"实际值":39.4},{"time":"00:28:54","设定值":40,"实际值":40},{"time":"00:22:54","设定值":40,"实际值":39.9},{"time":"00:17:24","设定值":40,"实际值":39.9},{"time":"00:11:24","设定值":40,"实际值":39.8},{"time":"00:05:54","设定值":40,"实际值":39.8}]'
    //   console.log('111111')
    //   this.chartData = JSON.parse(str)
    // })
  },
  computed: {
    chartBats: function () {
      let str = '[{"time":"17:52:14","设定值":40,"实际值":39.8},{"time":"17:46:44","设定值":40,"实际值":39.7},{"time":"17:40:44","设定值":40,"实际值":39.6},{"time":"17:35:14","设定值":40,"实际值":39.4},{"time":"17:29:14","设定值":40,"实际值":39.3},{"time":"17:23:44","设定值":40,"实际值":40},{"time":"17:17:44","设定值":40,"实际值":39.9},{"time":"17:12:14","设定值":40,"实际值":39.8},{"time":"17:06:14","设定值":40,"实际值":39.8},{"time":"17:00:44","设定值":40,"实际值":39.7},{"time":"16:54:44","设定值":40,"实际值":39.7},{"time":"16:49:14","设定值":40,"实际值":39.7},{"time":"16:43:14","设定值":40,"实际值":39.6},{"time":"16:37:44","设定值":40,"实际值":39.6},{"time":"16:31:44","设定值":40,"实际值":39.5},{"time":"16:26:14","设定值":40,"实际值":39.4},{"time":"16:20:14","设定值":40,"实际值":39.3},{"time":"16:14:44","设定值":40,"实际值":39.4},{"time":"16:08:44","设定值":40,"实际值":40},{"time":"16:03:14","设定值":40,"实际值":39.9},{"time":"15:57:14","设定值":40,"实际值":39.9},{"time":"15:51:44","设定值":40,"实际值":39.8},{"time":"15:45:21","设定值":40,"实际值":39.7},{"time":"15:39:51","设定值":40,"实际值":39.6},{"time":"15:33:51","设定值":40,"实际值":39.4},{"time":"15:27:40","设定值":40,"实际值":40},{"time":"15:21:40","设定值":40,"实际值":39.9},{"time":"15:16:10","设定值":40,"实际值":39.7},{"time":"15:10:10","设定值":40,"实际值":39.6},{"time":"15:04:40","设定值":40,"实际值":39.5},{"time":"14:58:40","设定值":40,"实际值":40},{"time":"14:53:10","设定值":40,"实际值":39.9},{"time":"14:47:10","设定值":40,"实际值":39.8},{"time":"14:41:40","设定值":40,"实际值":39.6},{"time":"14:35:40","设定值":40,"实际值":39.5},{"time":"14:30:10","设定值":40,"实际值":39.3},{"time":"14:24:10","设定值":40,"实际值":40},{"time":"14:18:40","设定值":40,"实际值":39.9},{"time":"14:12:40","设定值":40,"实际值":39.7},{"time":"14:07:10","设定值":40,"实际值":39.6},{"time":"14:01:10","设定值":40,"实际值":39.5},{"time":"13:55:40","设定值":40,"实际值":39.9},{"time":"13:49:40","设定值":40,"实际值":39.9},{"time":"13:44:10","设定值":40,"实际值":39.8},{"time":"13:38:10","设定值":40,"实际值":39.6},{"time":"13:32:40","设定值":40,"实际值":39.5},{"time":"13:26:40","设定值":40,"实际值":39.4},{"time":"13:21:10","设定值":40,"实际值":39.3},{"time":"13:15:10","设定值":40,"实际值":39.1},{"time":"13:09:40","设定值":40,"实际值":40},{"time":"11:07:17","设定值":40,"实际值":39.9},{"time":"11:01:47","设定值":40,"实际值":39.8},{"time":"10:55:47","设定值":40,"实际值":39.7},{"time":"10:50:17","设定值":40,"实际值":39.6},{"time":"10:44:17","设定值":40,"实际值":39.5},{"time":"10:38:47","设定值":40,"实际值":39.4},{"time":"10:32:47","设定值":40,"实际值":39.2},{"time":"10:27:17","设定值":40,"实际值":40},{"time":"10:21:17","设定值":40,"实际值":40},{"time":"10:15:47","设定值":40,"实际值":39.9},{"time":"10:09:47","设定值":40,"实际值":39.9},{"time":"10:04:17","设定值":40,"实际值":39.8},{"time":"09:58:17","设定值":40,"实际值":39.8},{"time":"09:52:47","设定值":40,"实际值":39.8},{"time":"09:46:47","设定值":40,"实际值":39.7},{"time":"09:41:17","设定值":40,"实际值":39.7},{"time":"09:35:17","设定值":40,"实际值":39.7},{"time":"09:29:47","设定值":40,"实际值":39.6},{"time":"09:23:47","设定值":40,"实际值":39.6},{"time":"09:18:17","设定值":40,"实际值":39.6},{"time":"09:12:17","设定值":40,"实际值":39.5},{"time":"09:06:47","设定值":40,"实际值":39.5},{"time":"09:00:47","设定值":40,"实际值":39.5},{"time":"08:55:17","设定值":40,"实际值":40.7},{"time":"07:16:54","设定值":40,"实际值":39.4},{"time":"07:11:24","设定值":40,"实际值":39.4},{"time":"07:05:24","设定值":40,"实际值":39.3},{"time":"06:59:54","设定值":40,"实际值":39.2},{"time":"06:53:54","设定值":40,"实际值":39.1},{"time":"06:48:24","设定值":40,"实际值":39},{"time":"06:42:24","设定值":40,"实际值":39.6},{"time":"06:36:54","设定值":40,"实际值":40.3},{"time":"06:30:54","设定值":40,"实际值":39},{"time":"06:25:24","设定值":40,"实际值":40},{"time":"06:19:24","设定值":40,"实际值":39.9},{"time":"06:13:54","设定值":40,"实际值":39.8},{"time":"06:07:54","设定值":40,"实际值":39.8},{"time":"06:02:24","设定值":40,"实际值":39.7},{"time":"05:56:24","设定值":40,"实际值":39.6},{"time":"05:50:54","设定值":40,"实际值":39.4},{"time":"05:44:54","设定值":40,"实际值":39.3},{"time":"05:39:24","设定值":40,"实际值":39.2},{"time":"05:33:24","设定值":40,"实际值":39.2},{"time":"05:27:54","设定值":40,"实际值":39.1},{"time":"05:21:54","设定值":40,"实际值":39},{"time":"05:16:24","设定值":40,"实际值":39.8},{"time":"05:10:24","设定值":40,"实际值":39.2},{"time":"05:04:54","设定值":40,"实际值":39.3},{"time":"04:58:54","设定值":40,"实际值":39.4},{"time":"04:53:24","设定值":40,"实际值":39.5},{"time":"04:47:24","设定值":40,"实际值":39.5},{"time":"04:41:54","设定值":40,"实际值":39.5},{"time":"04:35:54","设定值":40,"实际值":39.5},{"time":"04:30:24","设定值":40,"实际值":39.5},{"time":"04:24:24","设定值":40,"实际值":39.4},{"time":"04:18:54","设定值":40,"实际值":39.3},{"time":"04:12:54","设定值":40,"实际值":40},{"time":"04:07:24","设定值":40,"实际值":39.9},{"time":"04:01:24","设定值":40,"实际值":39.8},{"time":"03:55:54","设定值":40,"实际值":39.7},{"time":"03:49:54","设定值":40,"实际值":39.6},{"time":"03:44:24","设定值":40,"实际值":39.6},{"time":"03:38:24","设定值":40,"实际值":39.5},{"time":"03:32:54","设定值":40,"实际值":39.4},{"time":"03:26:54","设定值":40,"实际值":39.3},{"time":"03:21:24","设定值":40,"实际值":39.5},{"time":"03:15:24","设定值":40,"实际值":39.9},{"time":"03:09:54","设定值":40,"实际值":39.8},{"time":"03:03:54","设定值":40,"实际值":39.7},{"time":"02:58:24","设定值":40,"实际值":39.6},{"time":"02:52:24","设定值":40,"实际值":39.5},{"time":"02:46:54","设定值":40,"实际值":39.4},{"time":"02:40:54","设定值":40,"实际值":39.3},{"time":"02:35:24","设定值":40,"实际值":39.2},{"time":"02:29:24","设定值":40,"实际值":39.2},{"time":"02:23:54","设定值":40,"实际值":39.5},{"time":"02:17:54","设定值":40,"实际值":39.6},{"time":"02:12:24","设定值":40,"实际值":39.6},{"time":"02:06:24","设定值":40,"实际值":39.7},{"time":"02:00:54","设定值":40,"实际值":39.7},{"time":"01:54:54","设定值":40,"实际值":39.7},{"time":"01:49:24","设定值":40,"实际值":39.7},{"time":"01:43:24","设定值":40,"实际值":39.6},{"time":"01:37:54","设定值":40,"实际值":39.5},{"time":"01:31:54","设定值":40,"实际值":39.5},{"time":"01:26:24","设定值":40,"实际值":39.4},{"time":"01:20:24","设定值":40,"实际值":39.3},{"time":"01:14:54","设定值":40,"实际值":39.3},{"time":"01:08:54","设定值":40,"实际值":40},{"time":"01:03:24","设定值":40,"实际值":39.9},{"time":"00:57:24","设定值":40,"实际值":39.8},{"time":"00:51:54","设定值":40,"实际值":39.7},{"time":"00:45:54","设定值":40,"实际值":39.6},{"time":"00:40:24","设定值":40,"实际值":39.5},{"time":"00:34:24","设定值":40,"实际值":39.4},{"time":"00:28:54","设定值":40,"实际值":40},{"time":"00:22:54","设定值":40,"实际值":39.9},{"time":"00:17:24","设定值":40,"实际值":39.9},{"time":"00:11:24","设定值":40,"实际值":39.8},{"time":"00:05:54","设定值":40,"实际值":39.8}]'
      return JSON.parse(str)
    }
  },
  methods: {
    _getChartData () {
      getChartData().then((res) => {
        this.chartData = this.buildUpData(res.data.chart)
      })
    },
    buildUpData (rawData) {
      let header1 = 'time'
      let header2 = rawData.yAxis[0].name
      let header3 = rawData.yAxis[1].name
      let rows = []
      for (let i = 0; i < rawData.xAxis.length; i++) {
        let obj = {}
        obj[header1] = rawData.xAxis[i]
        obj[header2] = rawData.yAxis[0].data[i]
        obj[header3] = rawData.yAxis[1].data[i]
        rows.push(obj)
      }
      console.dir(rows)
      console.log(JSON.stringify(rows))
      let chartData = {
        columns: [header1, header2, header3],
        rows: rows
      }
      return chartData
    }
  }
}
</script>

<style scoped lang="stylus">

</style>
