<template>
  <div class="contianer">
    <div class="date">
      <div class="dateButton" @click="switchSelector">
        <span>{{switchText}}</span>
        <img src="../../assets/img/arrow_triangle_down.png"/>
      </div>
      <div v-show="switchPanel" class="datePanel">
        <span class="date-item" @click="selectDate(1)" :class="selectIndex == '1'?'select-font-color':'common-font-color'">本日</span>
        <span class="date-item" @click="selectDate(2)" :class="selectIndex == '2'?'select-font-color':'common-font-color'">本周</span>
        <span class="date-item" @click="selectDate(3)" :class="selectIndex == '3'?'select-font-color':'common-font-color'">本月</span>
      </div>
    </div>
    <div class="main">
      <div class="chartPanel">
        <!-- 图表区域 -->
        <ve-line class="chart" :height="chart1Height" :data="chartData1" :extend="extend1"></ve-line>
        <ve-line class="chart m-top-12" :height="chart1Height" :data="chartData1" :extend="extend2"></ve-line>
        <div class="m-top-12"></div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'equipment-data',
  data: function () {
    return {
      switchPanel: false,
      selectIndex: 1,
      switchText: '本日',
      chart1Height: '300px',
      chartData1: {
        columns: ['日期', '访问用户', '下单用户', '下单率'],
        rows: [
          { '日期': '1/1', '访问用户': 1393, '下单用户': 1093, '下单率': 0.32 },
          { '日期': '1/2', '访问用户': 3530, '下单用户': 3230, '下单率': 0.26 },
          { '日期': '1/3', '访问用户': 2923, '下单用户': 2623, '下单率': 0.76 },
          { '日期': '1/4', '访问用户': 1723, '下单用户': 1423, '下单率': 0.49 },
          { '日期': '1/5', '访问用户': 3792, '下单用户': 3492, '下单率': 0.323 },
          { '日期': '1/6', '访问用户': 4593, '下单用户': 4293, '下单率': 0.78 },
          { '日期': '1/7', '访问用户': 1393, '下单用户': 1093, '下单率': 0.32 },
          { '日期': '1/8', '访问用户': 3530, '下单用户': 3230, '下单率': 0.26 },
          { '日期': '1/9', '访问用户': 2923, '下单用户': 2623, '下单率': 0.76 },
          { '日期': '1/10', '访问用户': 1723, '下单用户': 1423, '下单率': 0.49 },
          { '日期': '1/11', '访问用户': 3792, '下单用户': 3492, '下单率': 0.323 },
          { '日期': '1/12', '访问用户': 4593, '下单用户': 4293, '下单率': 0.78 }
        ]
      },
      extend1: {
        'xAxis.0.axisLabel.rotate': 45,
        legend: {
          y: 'bottom',
          padding: [10, 10],
          selectedMode: false // 取消图例上的点击事件
        },
        title: {
          show: true,
          text: '生产时间: 100min',
          // subtext: '副标题',
          padding: [16, 8, 8, 8],
          left: 10,
          textStyle: {
            fontWeight: 'normal'
          }
        },
        grid: {
          bottom: 30
        }
      },
      extend2: {
        'xAxis.0.axisLabel.rotate': 45,
        legend: {
          y: 'bottom',
          padding: [10, 10],
          selectedMode: false // 取消图例上的点击事件
        },
        title: {
          show: true,
          text: '生产数量: 100片',
          // subtext: '副标题',
          padding: [16, 8, 8, 8],
          left: 10,
          textStyle: {
            fontWeight: 'normal'
          }
        },
        grid: {
          bottom: 30
        }
      }
    }
  },
  methods: {
    switchSelector (e) { // 开启或者关闭日期选择器
      this.switchPanel = !this.switchPanel
    },
    selectDate (index) { // 选择日期
      console.dir(index)
      this.switchPanel = false
      this.selectIndex = index
      switch (index) {
        case 1:
          this.switchText = '本日'
          break
        case 2:
          this.switchText = '本周'
          break
        case 3:
          this.switchText = '本月'
          break
      }
    }
  },
  mounted () {
  }
}
</script>

<style scoped lang="stylus">
  .contianer
    display flex
    flex-direction column
    width 100%
    height 100%
    .date
      line-height 55px
      background-color #011128
      position relative
      .dateButton
        display flex
        align-items center
        font-size 18px
        color #e7e7e7
        padding 0px 24px
        img
          width 18px
          height 18px
          margin-left 8px
      .datePanel
        position absolute
        display flex
        flex-direction column
        z-index 2
        span
          width 176px
          text-align center
          align-content center
          background-color #011128
          margin-top 1px
          font-size 16px
    .main
      background-color #e7e7e7
      flex 1
      overflow scroll
    .common-font-color
      color #e7e7e7
    .select-font-color
      color #ff8a55
  .chart
    background-color white
    width 98%
  .m-top-12
    margin-top 12px
</style>
